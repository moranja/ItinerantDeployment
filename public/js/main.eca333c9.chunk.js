(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,t,a){e.exports=a(453)},453:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),o=a.n(i),l=a(506),c=a(21),s=a(14),d=a(12),u=a(16),m=a(15),h=a(17),p=a(508),f=a(496),g=a(499),E=a(498),y=a(497),b=a(492),C=a(494),v=a(223),S=a(454),O=a(493),j=a(56),I=Object(j.a)(),k=a(507),D=Object(S.a)(function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},button:{margin:e.spacing(1)}}});function A(e){var t=D();return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroContent,style:{backgroundColor:"#eae9e7"}},r.a.createElement(O.a,{maxWidth:"md"},r.a.createElement(v.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Where would you like to go?"),r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0,xs:12,sm:9},r.a.createElement(v.a,{variant:"h4",align:"left",paragraph:!0},"Welcome to Itinerant, the best way to plan and organize your upcoming trips. To get started, select an itinerary from below, or create your own:")),r.a.createElement(C.a,{item:!0,xs:12,sm:3},r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(k.a,{id:"standard-name",label:"Title",name:"title",className:t.textField,value:e.title,onChange:e.handleChange,margin:"none"}),r.a.createElement(k.a,{id:"standard-name",label:"Description",name:"description",className:t.textField,value:e.description,onChange:e.handleChange,margin:"none"}),r.a.createElement(k.a,{id:"standard-name",label:"Image URL",name:"imageUrl",className:t.textField,value:e.imageUrl,onChange:e.handleChange,margin:"none"}),r.a.createElement("br",null),r.a.createElement(p.a,{variant:"outlined",className:t.button,onClick:e.handleSubmit},"Create")))))),r.a.createElement(O.a,{className:t.cardGrid,maxWidth:"md"},r.a.createElement(C.a,{container:!0,spacing:4},e.itineraries.map(function(e){return r.a.createElement(C.a,{item:!0,key:e.id,xs:12,sm:6},r.a.createElement(f.a,{className:t.card},r.a.createElement(y.a,{className:t.cardMedia,image:e.image_url,title:"Image title"}),r.a.createElement(E.a,{className:t.cardContent},r.a.createElement(v.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.title),r.a.createElement(v.a,null,e.description)),r.a.createElement(g.a,null,r.a.createElement(p.a,{size:"small",color:"primary",onClick:function(){return I.push("/itineraries/".concat(e.id))}},"View"))))})))))}var T=a(19),_="192.168.1.85",N={loadItineraries:function(){return function(e){fetch("http://".concat(_,":3000/itineraries/"),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(t){e({type:"ITINERARY_LIST",payload:t})})}}},x=Object(T.b)(function(e){return{itineraries:e.itineraries}},N)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),fetch("http://".concat(_,":3000/itineraries/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({title:a.state.title,description:a.state.description,image_url:a.state.imageUrl})}).then(function(e){return e.json()}).then(function(e){e.error?a.props.history.push("/login"):a.props.history.push("/itineraries/".concat(e.details.id))})},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.loadItineraries()}},{key:"render",value:function(){return r.a.createElement(A,Object.assign({itineraries:this.props.itineraries,handleChange:this.handleChange,handleSubmit:this.handleSubmit},this.state))}}]),t}(r.a.Component)),w=a(224),R=a(500),L=a(501),B=Object(S.a)(function(e){return{root:{flexGrow:1},appBarText:{color:"inherit"}}});var W=function(e){var t=B();return r.a.createElement("div",{className:t.root},r.a.createElement(R.a,{position:"static",style:{backgroundColor:"#923c2d"}},r.a.createElement(L.a,{variant:"dense"},r.a.createElement(v.a,{variant:"h6",className:t.appBarText,onClick:function(){I.push("/"),e.clearItinerary()}},"Home"),"\xa0 \xa0 \xa0",r.a.createElement(v.a,{variant:"h6",className:t.appBarText,onClick:function(){I.push("/profile"),e.clearItinerary()}},"Profile"),"\xa0 \xa0 \xa0",r.a.createElement(v.a,{variant:"h6",className:t.appBarText,onClick:function(){return I.push("/login")}},"Login"))))},P=Object(S.a)(function(e){return{background:{display:"flex",flexDirection:"column",flex:"1",backgroundColor:"#393b3a",backgroundSize:"100%"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),F=function(e){var t=P();return r.a.createElement("div",null,r.a.createElement(W,{clearItinerary:function(){}}),r.a.createElement(O.a,{component:"main"},r.a.createElement(b.a,null),r.a.createElement(C.a,{item:!0,xs:12,component:w.a,elevation:6,style:{backgroundColor:"#eae9e7"},square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{history:e.history}))))))},M=a(502),z=Object(S.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1524850011238-e3d235c7d4c9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1574&q=80)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function U(e){var t=z();return r.a.createElement(C.a,{container:!0,component:"main",className:t.root},r.a.createElement(b.a,null),r.a.createElement(C.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(C.a,{item:!0,xs:12,sm:8,md:5,component:w.a,elevation:6,square:!0,style:{backgroundColor:"#eae9e7"}},r.a.createElement("div",{className:t.paper},r.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:e.handleSubmit},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:e.handleChange}),r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.handleChange}),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:e.handleSubmit},"Sign In"),r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,onClick:function(){return I.push("/create_user")}},r.a.createElement(M.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up")))))))}var Y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),fetch("http://".concat(_,":3000/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:a.state.password})}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):(localStorage.setItem("token",e.auth_token),localStorage.setItem("username",e.username),localStorage.setItem("userId",e.id),a.props.history.push("/home"))})},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.logout=function(){localStorage.clear(),a.setState({})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){localStorage.clear(),this.setState({})}},{key:"render",value:function(){return r.a.createElement(U,{handleChange:this.handleChange,handleSubmit:this.handleSubmit})}}]),t}(r.a.Component),H=Object(S.a)(function(e){return{root:{height:"100vh",justifyContent:"center"},interior:{padding:"10px"},"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}});function V(e){var t=H();return r.a.createElement(C.a,{container:!0,component:"main",className:t.root},r.a.createElement(b.a,null),r.a.createElement(C.a,{item:!0,component:w.a,elevation:6,square:!0,style:{backgroundColor:"#eae9e7"},className:t.interior},r.a.createElement("div",{className:t.paper},r.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:e.handleSubmit},r.a.createElement(C.a,{container:!0,spacing:2},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(k.a,{autoComplete:"fname",name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"First Name",autoFocus:!0,onChange:e.handleChange})),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:e.handleChange})),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.handleChange}))),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:e.handleSubmit},"Sign Up"),r.a.createElement(C.a,{container:!0,justify:"flex-end"},r.a.createElement(C.a,{item:!0,onClick:function(){return I.push("/login")}},r.a.createElement(M.a,{href:"#",variant:"body2"},"Already have an account? Sign in")))))))}var J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),fetch("http://".concat(_,":3000/users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,name:a.state.name,password:a.state.password})}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):(localStorage.setItem("token",e.auth_token),localStorage.setItem("username",e.username),localStorage.setItem("userId",e.id),a.props.history.push("/home"))})},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(V,{handleChange:this.handleChange,handleSubmit:this.handleSubmit})}}]),t}(r.a.Component),q=Object(S.a)(function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},button:{margin:e.spacing(1)}}});function G(e){var t=q();return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroContent,style:{backgroundColor:"#eae9e7"}},r.a.createElement(O.a,{maxWidth:"md"},r.a.createElement(v.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Welcome, ",e.name,". Here are your itineraries:"),r.a.createElement(C.a,{container:!0,spacing:3}))),r.a.createElement(O.a,{className:t.cardGrid,maxWidth:"md"},r.a.createElement(C.a,{container:!0,spacing:4},e.itineraries.map(function(e){return r.a.createElement(C.a,{item:!0,key:e.id,xs:12,sm:6},r.a.createElement(f.a,{className:t.card},r.a.createElement(y.a,{className:t.cardMedia,image:e.image_url,title:"Image title"}),r.a.createElement(E.a,{className:t.cardContent},r.a.createElement(v.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.title),r.a.createElement(v.a,null,e.description)),r.a.createElement(g.a,null,r.a.createElement(p.a,{size:"small",color:"primary",onClick:function(){return I.push("/itineraries/".concat(e.id))}},"View"))))})))))}var X=Object(S.a)(function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},button:{margin:e.spacing(1)}}});function Z(e){var t=X();return r.a.createElement(O.a,{component:"main"},r.a.createElement(b.a,null),r.a.createElement(C.a,{item:!0,xs:12,component:w.a,elevation:6,style:{backgroundColor:"#eae9e7"},square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{itineraries:e.itineraries,name:e.name,history:e.history})))))}var K={loadUser:function(){return function(e){fetch("http://".concat(_,":3000/users/").concat(localStorage.userId),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(t){e({type:"SELECT_USER",payload:t})})}}},Q=Object(T.b)(function(e){return{user:e.user}},K)(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUser()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{clearItinerary:function(){}}),Object.keys(this.props.user).length?r.a.createElement(Z,{itineraries:this.props.user.itinerary_list,name:this.props.user.name}):null)}}]),t}(r.a.Component)),$={loadUsers:function(){return function(e){fetch("http://".concat(_,":3000/users/"),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(t){e({type:"USER_LIST",payload:t})})}},selectUser:function(e){return function(t){fetch("http://".concat(_,":3000/users/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){t({type:"SELECT_USER",payload:e})})}}},ee=Object(T.b)(function(e){return{users:e.users,selected_user:e.user}},$)(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){return r.a.createElement("div",null,Object.keys(this.props.users).length?r.a.createElement("ul",null,this.props.users.map(function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return I.push("/users/".concat(e.id))}},e.username)})):r.a.createElement("h2",null,"..."))}}]),t}(r.a.Component)),te=a(11),ae=a(44),ne=a(20),re=a(510),ie=a(505),oe=a(504),le=a(503),ce=a(125);var se=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("li",null,"".concat(e.formattedDate,", ").concat(e.editTime,": ").concat(e.editContent))),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Plan information:"),r.a.createElement(oe.a,null,r.a.createElement(ce.a,{placeholderText:"Click to select a date",selected:e.editDate,onChange:e.handleDateChange}),r.a.createElement(k.a,{margin:"none",id:"editTime",label:"Approximate time",value:e.editTime,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editContent",label:"Description",value:e.editContent,onChange:e.handleChange,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit()},color:"primary"},"Edit Plan"),r.a.createElement(p.a,{onClick:function(t){o(),e.handleDelete()},color:"primary"},"Delete Plan"))))},de={editPlan:function(e){return function(t){var a={plan_id:e.planId,date:e.date,time:e.time,content:e.content};fetch("http://".concat(_,":3000/plans/").concat(e.planId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},deletePlan:function(e){return function(t){fetch("http://".concat(_,":3000/plans/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}}},ue=Object(T.b)(function(e){return{itinerary:e.selected_itinerary}},de)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={editDate:"",formattedDate:a.props.date,editTime:a.props.time,editContent:a.props.content},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.handleDateChange=function(e){console.log(e),a.setState({editDate:e,formattedDate:[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-")})},a.handleEditSubmit=function(){var e={planId:a.props.id,date:a.state.formattedDate,time:a.state.editTime,content:a.state.editContent};a.props.editPlan(e)},a.handleDelete=function(){a.props.deletePlan(a.props.id)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(se,Object.assign({handleChange:this.handleChange,handleDelete:this.handleDelete,handleDateChange:this.handleDateChange,handleEditSubmit:this.handleEditSubmit},this.state))}}]),t}(r.a.Component));var me=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("li",null,"".concat(e.editName," (").concat(e.editClassification,"): ").concat(e.editDescription))),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Attraction information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editName",label:"Attraction name",value:e.editName,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editClassification",label:"Classification",value:e.editClassification,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editDescription",label:"Description",value:e.editDescription,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit()},color:"primary"},"Edit Attraction"),r.a.createElement(p.a,{onClick:function(t){o(),e.handleDelete()},color:"primary"},"Delete Attraction"))))},he={editAttraction:function(e){return function(t){var a={attraction_id:e.attractionId,name:e.name,classification:e.classification,description:e.description};fetch("http://".concat(_,":3000/attractions/").concat(e.attractionId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},deleteAttraction:function(e){return function(t){fetch("http://".concat(_,":3000/attractions/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}}},pe=Object(T.b)(function(e){return{itinerary:e.selected_itinerary}},he)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={editName:a.props.name,editClassification:a.props.classification,editDescription:a.props.description},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.handleEditSubmit=function(){var e={attractionId:a.props.id,name:a.state.editName,classification:a.state.editClassification,description:a.state.editDescription};a.props.editAttraction(e)},a.handleDelete=function(){a.props.deleteAttraction(a.props.id)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(me,Object.assign({handleChange:this.handleChange,handleEditSubmit:this.handleEditSubmit,handleDelete:this.handleDelete},this.state))}}]),t}(r.a.Component));var fe=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("h3",null,e.editName),r.a.createElement("p",null,e.editContent)),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Area information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editName",label:"Area name",value:e.editName,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editContent",label:"Description",value:e.editContent,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit()},color:"primary"},"Edit Area"),r.a.createElement(p.a,{onClick:function(t){o(),e.handleDelete()},color:"primary"},"Delete Area"))))},ge={addAttractionFromItinerary:function(e){return function(t){var a={area_id:e.areaId,name:e.name,classification:e.classification,description:e.description};fetch("http://".concat(_,":3000/attractions/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},editArea:function(e){return function(t){var a={area_id:e.areaId,name:e.name,country:e.country,content:e.content};fetch("http://".concat(_,":3000/areas/").concat(e.areaId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},deleteArea:function(e){return function(t){fetch("http://".concat(_,":3000/areas/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}}},Ee=Object(T.b)(function(e){return{itinerary:e.selected_itinerary}},ge)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",classification:"",description:"",editName:a.props.name,editContent:a.props.content},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.persist(),e.preventDefault();var t={areaId:a.props.id,name:a.state.name,classification:a.state.classification,description:a.state.description,itineraryId:a.props.itinerary.details.id};a.props.addAttractionFromItinerary(t)},a.handleEditSubmit=function(){var e={areaId:a.props.id,name:a.state.editName,content:a.state.editContent};a.props.editArea(e)},a.handleDelete=function(){a.props.deleteArea(a.props.id)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,Object.assign({handleChange:this.handleChange,handleEditSubmit:this.handleEditSubmit,handleDelete:this.handleDelete},this.state)),r.a.createElement("ul",null,this.props.attractions.map(function(e){return r.a.createElement(pe,Object.assign({},e,{key:e.id}))})))}}]),t}(r.a.Component));var ye=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:function(){i(!0)}},"Make a Plan"),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Plan information:"),r.a.createElement(oe.a,null,r.a.createElement(ce.a,{placeholderText:"Click to select a date",selected:e.startDate,onChange:e.handleDateChange}),r.a.createElement(k.a,{margin:"none",id:"time",label:"Approximate time",onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"description",label:"Description",onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handlePlanSubmit(t)},color:"primary"},"Add Plan"))))};var be=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:function(){i(!0)}},"Add an Area"),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Area information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"name",label:"Area name",onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"content",label:"Description",onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleSubmit(t)},color:"primary"},"Add Area"))))};var Ce=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("h2",null,e.editName,", ",e.editCountry),r.a.createElement("p",null,e.editContent)),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter City information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editName",label:"City name",value:e.editName,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editCountry",label:"Country",value:e.editCountry,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editContent",label:"Description",value:e.editContent,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit()},color:"primary"},"Edit City"),r.a.createElement(p.a,{onClick:function(t){o(),e.handleDelete()},color:"primary"},"Delete City"))))},ve=(a(252),{addAreaFromItinerary:function(e){return function(t){var a={city_id:e.cityId,name:e.name,content:e.content};fetch("http://".concat(_,":3000/areas"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},addPlan:function(e){return function(t){var a={city_id:e.cityId,date:e.date,time:e.time,content:e.content};fetch("http://".concat(_,":3000/plans"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},editCity:function(e){return function(t){var a={city_id:e.cityId,name:e.name,country:e.country,content:e.content};fetch("http://".concat(_,":3000/cities/").concat(e.cityId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},deleteCity:function(e){return function(t){fetch("http://".concat(_,":3000/cities/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}}}),Se=Object(T.b)(null,ve)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={startDate:"",name:"",content:"",date:"",time:"",description:"",editName:a.props.name,editCountry:a.props.country,editContent:a.props.content},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.handleDateChange=function(e){a.setState({startDate:e,formatted_date:[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-")})},a.handleSubmit=function(e){e.persist(),e.preventDefault();var t={cityId:a.props.id,name:a.state.name,content:a.state.content};a.setState({name:"",content:""}),a.props.addAreaFromItinerary(t)},a.handleEditSubmit=function(e){var t={cityId:a.props.id,name:a.state.editName,country:a.state.editCountry,content:a.state.editContent};a.props.editCity(t)},a.handlePlanSubmit=function(e){e.persist(),e.preventDefault();var t={cityId:a.props.id,date:a.state.formatted_date,time:a.state.time,content:a.state.description};a.setState({date:"",time:"",description:""}),a.props.addPlan(t)},a.handleDelete=function(){a.props.deleteCity(a.props.id)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Ce,Object.assign({handleChange:this.handleChange,handleEditSubmit:this.handleEditSubmit,handleDelete:this.handleDelete},this.state)),r.a.createElement("ul",null,this.props.plans.map(function(e){return r.a.createElement(ue,Object.assign({},e,{key:e.id}))})),r.a.createElement(ye,{handleChange:this.handleChange,handlePlanSubmit:this.handlePlanSubmit,handleDateChange:this.handleDateChange,startDate:this.state.startDate}),r.a.createElement("br",null),this.props.areas.map(function(e){return r.a.createElement(Ee,Object.assign({},e,{key:e.id}))})),r.a.createElement(be,{handleChange:this.handleChange,handleSubmit:this.handleSubmit}))}}]),t}(r.a.Component));var Oe=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement(p.a,{variant:"outlined",color:"primary",onClick:function(){i(!0)}},"Add a City"),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter City information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"name",label:"City name",onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"country",label:"Country",onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"content",label:"Description",onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleSubmit(t)},color:"primary"},"Add City"))))};var je=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("h2",null,e.editTitle),r.a.createElement("h3",null,e.editDescription)),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Itinerary information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editTitle",label:"Title",value:e.editTitle,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{margin:"none",id:"editDescription",label:"Description",value:e.editDescription,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editVitalInfo",multiline:!0,rows:"4",label:"Vital Info",value:e.editVitalInfo,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editHelpfulInfo",multiline:!0,rows:"4",label:"Helpful Info",value:e.editHelpfulInfo,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editNotes",multiline:!0,rows:"4",label:"Notes",value:e.editNotes,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit()},color:"primary"},"Edit Itinerary"),r.a.createElement(p.a,{onClick:function(t){o(),e.handleDelete()},color:"primary"},"Delete Itinerary"))))};var Ie=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("h4",null,e.editVitalInfo)),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Itinerary information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editVitalInfo",multiline:!0,rows:"4",label:"Vital Info",value:e.editVitalInfo,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit(t)},color:"primary"},"Edit Itinerary"))))};var ke=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("h4",null,e.editHelpfulInfo)),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Itinerary information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editHelpfulInfo",multiline:!0,rows:"4",label:"Helpful Info",value:e.editHelpfulInfo,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit(t)},color:"primary"},"Edit Itinerary"))))};var De=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],i=a[1];function o(){i(!1)}return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){i(!0)}},r.a.createElement("h4",null,e.editNotes)),r.a.createElement(re.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Enter Itinerary information:"),r.a.createElement(oe.a,null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"editNotes",multiline:!0,rows:"4",label:"Notes",value:e.editNotes,onChange:e.handleChange,fullWidth:!0})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{onClick:function(t){o(),e.handleEditSubmit(t)},color:"primary"},"Edit Itinerary"))))},Ae={addCityFromItinerary:function(e){return function(t){var a={itinerary_id:e.itineraryId,name:e.name,country:e.country,content:e.content};fetch("http://".concat(_,":3000/cities"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},editItinerary:function(e){return function(t){var a={itinerary_id:e.itineraryId,title:e.title,description:e.description,vital_info:e.vitalInfo,helpful_info:e.helpfulInfo,notes:e.notes};fetch("http://".concat(_,":3000/itineraries/").concat(e.itineraryId),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},deleteItinerary:function(e){return function(t){fetch("http://".concat(_,":3000/itineraries/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):(t({type:"CLEAR_SELECTED_ITINERARY",payload:e}),I.push("/home"))})}}},Te=Object(T.b)(function(e){return{itinerary:e.selected_itinerary}},Ae)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={searchTerm:"",name:"",country:"",content:"",editTitle:a.props.itinerary.details.title,editDescription:a.props.itinerary.details.description,editVitalInfo:a.props.itinerary.details.vital_info,editHelpfulInfo:a.props.itinerary.details.helpful_info,editNotes:a.props.itinerary.details.notes},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.persist(),e.preventDefault();var t={itineraryId:a.props.itinerary.details.id,name:a.state.name,country:a.state.country,content:a.state.content};a.props.addCityFromItinerary(t),a.setState({name:"",country:"",content:""})},a.handleEditSubmit=function(){var e={itineraryId:a.props.itinerary.details.id,title:a.state.editTitle,description:a.state.editDescription,vitalInfo:a.state.editVitalInfo,helpfulInfo:a.state.editHelpfulInfo,notes:a.state.editNotes};console.log(e),a.props.editItinerary(e)},a.handleDelete=function(){a.props.deleteItinerary(a.props.itinerary.details.id)},a.handleSearch=function(e){void 0!==e&&a.setState({searchTerm:e.target.value})},a.searchedItinerary=function(){var e=a.state.searchTerm.toLowerCase();if(""===e)return a.props.itinerary;var t=a.props.itinerary.cities.map(function(t){if(t.name.toLowerCase().includes(e))return Object(te.a)({},t,{plans:[]});var a=Object(te.a)({},t,{plans:[]}),n=a.areas.map(function(t){if(t.name.toLowerCase().includes(e))return t;var a=Object(te.a)({},t),n=a.attractions.map(function(t){return t.name.toLowerCase().includes(e)||t.classification.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)?t:null}).filter(Boolean);return 0!==n.length?Object(te.a)({},a,{attractions:Object(ae.a)(n)}):null}).filter(Boolean);return 0!==n.length?Object(te.a)({},a,{areas:Object(ae.a)(n)}):null}).filter(Boolean);return{schedule:[],details:{id:a.props.itinerary.details.id,title:a.props.itinerary.details.title},cities:Object(ae.a)(t)}},a.vitalInfo=function(){if(a.props.itinerary.users.filter(function(e){return e.id===parseInt(localStorage.userId)}).length)return r.a.createElement(Ie,{editVitalInfo:a.state.editVitalInfo,handleChange:a.handleChange,handleEditSubmit:a.handleEditSubmit})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.searchedItinerary();return r.a.createElement("div",null,r.a.createElement(k.a,{autoFocus:!0,margin:"none",id:"searchTerm",label:"Search your itinerary:",onChange:this.handleSearch}),r.a.createElement(je,{editTitle:this.state.editTitle,editDescription:this.state.editDescription,editVitalInfo:this.state.editVitalInfo,editHelpfulInfo:this.state.editHelpfulInfo,editNotes:this.state.editNotes,handleChange:this.handleChange,handleEditSubmit:this.handleEditSubmit,handleDelete:this.handleDelete}),r.a.createElement("ul",null,e.schedule.map(function(e,t){return r.a.createElement("li",{key:t},e)})),this.vitalInfo(),e.cities.map(function(e,t){return r.a.createElement(Se,Object.assign({},e,{key:e.id}))}),r.a.createElement(Oe,{handleChange:this.handleChange,handleSubmit:this.handleSubmit}),r.a.createElement(ke,{editHelpfulInfo:this.state.editHelpfulInfo,handleChange:this.handleChange,handleEditSubmit:this.handleEditSubmit}),r.a.createElement(De,{editNotes:this.state.editNotes,handleChange:this.handleChange,handleEditSubmit:this.handleEditSubmit}))}}]),t}(r.a.Component)),_e=a(253),Ne=a(129),xe=Ne.compose,we=Ne.withProps,Re=Ne.lifecycle,Le=a(254),Be=Le.withScriptjs,We=Le.withGoogleMap,Pe=Le.GoogleMap,Fe=Le.Marker,Me=Le.InfoWindow,ze=a(449).SearchBox,Ue=xe(we({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAALXKRDZu3lDYTuMUMxXWCqq3CRm5dZrU&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),Re({componentWillMount:function(){var e=this,t={},a=41.9,n=-87.624;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){a=t.coords.latitude,n=t.coords.longitude,e.setState({center:{lat:a,lng:n}})}),this.setState({bounds:null,center:{lat:a,lng:n},markers:[],onMapMounted:function(e){t.map=e},onBoundsChanged:function(){e.setState({bounds:t.map.getBounds(),center:t.map.getCenter()})},onCenterChanged:function(){e.setState({center:t.map.getCenter()})},onSearchBoxMounted:function(e){t.searchBox=e},onMarkerMounted:function(e){t.marker=e},onPlacesChanged:function(){var a=t.searchBox.getPlaces();e.props.addAnAttraction(a);var n=a.map(function(e){return{position:e.geometry.location,place_info:e}}),r=_e.get(n,"0.position",e.state.center);e.setState({center:r,markers:n})},markerWasClicked:function(t,a){var n=t.filter(function(e){return e.place_info.place_id!==a.place_info.place_id}).map(function(e){return e.place_info}),r=[a.place_info].concat(Object(ae.a)(n));e.props.addAnAttraction(r);var i=r.map(function(e){return{position:e.geometry.location,place_info:e}}),o=_e.get(i,"0.position",e.state.center);e.setState({center:o,markers:i})}})}}),Be,We)(function(e){return r.a.createElement(Pe,{ref:e.onMapMounted,defaultZoom:12,center:e.center,onBoundsChanged:e.onBoundsChanged,onCenterChanged:e.onCenterChanged},r.a.createElement(ze,{ref:e.onSearchBoxMounted,bounds:e.bounds,controlPosition:11,onPlacesChanged:e.onPlacesChanged},r.a.createElement("input",{type:"text",placeholder:"Search for an attraction",style:{boxSizing:"border-box",border:"1px solid transparent",width:"240px",height:"32px",marginBottom:"20px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses"}})),e.markers.map(function(t,a){return r.a.createElement(Fe,{ref:0===a?e.onMarkerMounted:null,key:a,position:t.position,onClick:function(){return e.markerWasClicked(e.markers,t)}},0===a?r.a.createElement(Me,{onCloseClick:e.onToggleOpen},r.a.createElement("div",null,t.place_info.name,r.a.createElement("br",null),t.place_info.formatted_address)):null)}))}),Ye={addAttractionFromMap:function(e){return function(t){var a={area_id:e.areaId,name:e.name,latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng(),place_id:e.place_id,address:e.formatted_address,cost:e.price_level,classification:e.classification,description:e.description};fetch("http://".concat(_,":3000/attractions/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},a))}).then(function(e){return e.json()}).then(function(e){t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},loadItinerary:function(e){return function(t){fetch("http://".concat(_,":3000/itineraries/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},addCollaborator:function(e){return function(t){fetch("http://".concat(_,":3000/user_itineraries/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(Object(te.a)({},e))}).then(function(e){return e.json()}).then(function(e){e.error?console.log(e.message):t({type:"LOAD_SELECTED_ITINERARY",payload:e})})}},copyItinerary:function(e){return function(t){fetch("http://".concat(_,":3000/copyItinerary/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify({id:e})}).then(function(e){return e.json()}).then(function(e){t({type:"CLEAR_SELECTED_ITINERARY"}),I.push("/profile")})}},clearItinerary:function(){return{type:"CLEAR_SELECTED_ITINERARY"}}},He=Object(T.b)(function(e){return{itinerary:e.selected_itinerary}},Ye)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={cityId:"",areaId:"",classification:"Food and Drink",description:""},a.addAnAttraction=function(e){a.setState({attraction:e[0]})},a.handleChange=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.handleCityChange=function(e){var t,n=a.props.itinerary.cities.find(function(t){return t.id===parseInt(e.target.value)}).areas.length?a.props.itinerary.cities.find(function(t){return t.id===parseInt(e.target.value)}).areas[0].id:"";a.setState((t={},Object(c.a)(t,e.target.id,parseInt(e.target.value)),Object(c.a)(t,"areaId",n),t))},a.handleSubmit=function(e,t){e.persist(),e.preventDefault();var n=Object(te.a)({},a.state.attraction,{areaId:t,description:a.state.description,itineraryId:a.props.itinerary.details.id,classification:a.state.classification});a.props.addAttractionFromMap(n),a.setState({description:"",classification:"Food and Drink"})},a.handleAddUser=function(e){e.persist(),e.preventDefault(),a.props.addCollaborator({username:a.state.username,itineraryId:a.props.itinerary.details.id})},a.clearItinerary=function(){a.props.clearItinerary()},a.canEdit=function(){return a.props.itinerary.users.filter(function(e){return e.id===parseInt(localStorage.userId)}).length?r.a.createElement("div",null,r.a.createElement("h4",null,"Welcome ",localStorage.username,", you may edit this page"),r.a.createElement("form",{onSubmit:a.handleAddUser},r.a.createElement("label",null,"Enter another user's username to add them as a collaborator: "),r.a.createElement("input",{type:"text",placeholder:"Enter Username",id:"username",onChange:a.handleChange}),r.a.createElement("input",{type:"submit"}))):r.a.createElement("div",null,r.a.createElement("h4",null,"You may not edit this page"),r.a.createElement("button",{onClick:function(){return a.props.copyItinerary(a.props.itinerary.details.id)}},"Click here to copy"))},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.loadItinerary(this.props.match.params.id)}},{key:"renderForm",value:function(e,t){var a=this;return 0===this.props.itinerary.cities.length?r.a.createElement("h3",null,"Add a City and an Area to get started adding attractions from the map"):r.a.createElement("form",{onSubmit:function(e){return a.handleSubmit(e,t)}},r.a.createElement("select",{id:"cityId",onChange:this.handleCityChange},this.props.itinerary.cities.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),t?r.a.createElement("select",{id:"areaId",onChange:this.handleChange},this.props.itinerary.cities.find(function(t){return t.id===e}).areas.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})):null,r.a.createElement("select",{id:"classification",onChange:this.handleChange},r.a.createElement("option",{value:"Food and Drink"},"Food and Drink"),r.a.createElement("option",{value:"Attraction"},"Attraction"),r.a.createElement("option",{value:"Shopping"},"Shopping"),r.a.createElement("option",{value:"Nightlife"},"Nightlife"),r.a.createElement("option",{value:"Other"},"Other")),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Description",id:"description",value:this.state.description,onChange:this.handleChange}),r.a.createElement("input",{type:"submit"}))}},{key:"render",value:function(){var e,t;return this.state.cityId?(e=this.state.cityId,t=!this.state.areaId&&this.props.itinerary.cities.find(function(t){return t.id===e}).areas.length?this.props.itinerary.cities.find(function(t){return t.id===e}).areas[0].id:this.state.areaId):this.props.itinerary.cities&&this.props.itinerary.cities.length&&(this.state.areaId?(e=this.props.itinerary.cities[0].id,t=this.state.areaId):this.props.itinerary.cities[0].areas.length?(e=this.props.itinerary.cities[0].id,t=this.props.itinerary.cities[0].areas[0].id):e=this.props.itinerary.cities[0].id),r.a.createElement("div",null,r.a.createElement(W,{clearItinerary:this.clearItinerary}),r.a.createElement(b.a,null),Object.keys(this.props.itinerary).length?r.a.createElement("div",null,r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0,xs:12,sm:5,style:{position:"relative"}},r.a.createElement("div",{style:{backgroundColor:"#eae9e7",padding:"20px",position:"absolute",top:"7%",left:"7%",width:"500px",margin:"10px 0 0 10px"}},r.a.createElement(Ue,{isMarkerShown:!1,addAnAttraction:this.addAnAttraction}),this.renderForm(e,t),r.a.createElement("br",null),this.canEdit())),r.a.createElement(C.a,{item:!0,xs:12,sm:7},r.a.createElement("div",{style:{backgroundColor:"#eae9e7",height:"100vh",padding:"20px",overflow:"scroll"}},r.a.createElement(Te,this.props.itinerary))))):r.a.createElement("h2",null,"loading..."))}}]),t}(r.a.Component)),Ve={loadUser:function(e){return function(t){fetch("http://".concat(_,":3000/users/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then(function(e){return e.json()}).then(function(e){t({type:"SELECT_USER",payload:e})})}}},Je=Object(T.b)(function(e){return{user:e.user}},Ve)(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUser(this.props.match.params.id)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),this.props.user.username)}}]),t}(r.a.Component)),qe=function(){return r.a.createElement("div",{style:{backgroundColor:"#393b3a"}},r.a.createElement(l.b,{history:I,style:{backgroundColor:"#393b3a"}},localStorage.token?null:I.push("/login"),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/users/:id",component:Je}),r.a.createElement(l.a,{path:"/users",component:ee}),r.a.createElement(l.a,{path:"/profile",component:Q}),r.a.createElement(l.a,{path:"/itineraries/:id",component:He}),r.a.createElement(l.a,{path:"/login",component:Y}),r.a.createElement(l.a,{path:"/create_user",component:J}),r.a.createElement(l.a,{path:"/",component:F}))))},Ge=a(89),Xe=a(222),Ze=Object(Ge.c)(Object(Ge.a)(Xe.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Ke=Object(Ge.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{itineraries:[],users:[],selected_itinerary:{},user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITINERARY_LIST":return Object(te.a)({},e,{itineraries:Object(ae.a)(t.payload)});case"LOAD_SELECTED_ITINERARY":return Object(te.a)({},e,{selected_itinerary:t.payload});case"USER_LIST":return Object(te.a)({},e,{users:Object(ae.a)(t.payload),user:{}});case"SELECT_USER":return Object(te.a)({},e,{user:t.payload});case"CLEAR_SELECTED_ITINERARY":return Object(te.a)({},e,{selected_itinerary:{}});default:return e}},Ze);o.a.render(r.a.createElement(T.a,{store:Ke},r.a.createElement(qe,null)),document.getElementById("root"))}},[[232,1,2]]]);
//# sourceMappingURL=main.eca333c9.chunk.js.map